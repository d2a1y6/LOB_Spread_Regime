**研究内容：在预测高频交易方向中，挂单不平衡（LobImbalance）和重心偏移（Micro_Mid_Spread）这两个因子之间存在精细的非线性关系。希望研究清楚这个非线性关系的构成和来历，为之提供concrete的理论+实证解释。**



# 太长不看版ai省流

**本研究发现，市场在不同拥挤度（Spread）下的三种截然不同的反应模式：**

**状态一：高流动性（Spread = 1 Tick）$\rightarrow$ 动量效应 (Momentum)**

- 场景： 市场最活跃的时候，买一卖一紧咬（例如买10.00，卖10.01）。
- 逻辑： 此时挂单成本极低，任何一方的微小失衡（比如买单稍微多一点）都很容易转化为真实的成交和价格突破。
- 表现： “相信你的眼睛”。买压大，预测下一刻涨。

**状态二：流动性陷阱（Spread = 2 Ticks）$\rightarrow$ 反转效应 (Reversal)**

- 场景： 这是一个特殊的中间态。通常是因为一方撤单后退，而另一方没有跟进（缺乏跨价差进攻意愿）。
- 逻辑： 这是一个“陷阱”。如果此时盘口显示买压很大（Imbalance高），但Spread却是2（说明买方其实没有意愿向上吃），这通常意味着买方是被动的、虚弱的。
- 表现： “别信你的眼睛”。看着是买压，其实下一刻容易跌。

**状态三：流动性枯竭/高成本（Spread $\ge$ 3 Ticks）$\rightarrow$ 非线性信任曲线**

- 场景： 买卖分歧大，挂单不仅需要资金，还需要承担被选中后瞬间浮亏的风险（因为价差大），因此挂单不仅是流动性，更是昂贵的信号。
- 逻辑（三段式）：
  1. 微弱失衡（蓝区）： 噪音。力量太小推不动大价差，均值回归（反转）。
  2. 显著失衡（红区）： 真实意图。买方下了重注，愿意承担高风险挂单，市场相信这是真的想买（动量）。且价差越大，这个可信区间越宽。
  3. 极端失衡（蓝区）： 欺诈/力竭。买单多得离谱却不成交，极大概率是Spoofing（诱多）或者存货出清前的虚张声势，市场判定为假（反转）。



这个选题试图用信号博弈（Signaling Game）中的分离均衡（Separating Equilibrium）来解释上述现象。

- Spread作为筛选器（Filter）：
  - 低Spread = 混同均衡（Pooling）： 挂单便宜，知情交易者和噪音交易者混在一起，市场分不清，只能按简单的“人多力量大”处理（线性动量）。
  - 高Spread = 分离均衡（Separating）： 挂单贵，噪音交易者玩不起退出了。此时盘口上留下的单子含金量变高（信噪比提升）。
- Over-signaling（过度信号）： 即使在分离均衡中，如果信号强得过分（极端失衡），反而会触发市场的防御机制，被识别为操纵。



这篇研究如果做成，在学术脉络中的定位：

1. 挑战经典： 修正了 Cartea et al. (2015) 关于 OBI 线性预测能力的论断。指出线性关系只是 Spread=1 时的特例，盲目线性外推会导致在 Spread=2 时被收割。
2. 解释谜题： 解释了 Gould & Bonart (2016) 发现的“小 Tick 股票预测力弱且非单调”的困惑。其实不是预测力弱，而是预测方向反了（被 Spread=2 的反转抵消了）。
3. 理论创新： 提出了 "State-dependent OBI"（状态依赖的订单流失衡） 概念。即 Spread 不仅仅是交易成本，更是一个内生的信噪比调节器。







以下为正文⬇️

---

# 这个选题怎么来的

我在光华《人工智能与投资分析》这门课的期末大作业做了一个 使用高频数据预测“下一个3s交易方向（涨/跌）” 的研究，训练了好几个机器学习模型。将表现最好的模型LightGBM提取出来，对各个因子的交互效应做SHAP分析（计算每个特征对模型最终预测的贡献度，来量化该特征的重要性及其具体影响方向）。有一组交互效应画出来的图非常奇怪：

![02_interaction_2_LobImbalance_vs_Micro_Mid_Spread](./02_interaction_2_LobImbalance_vs_Micro_Mid_Spread.png)

这里涉及的两个变量是：

订单薄不平衡$\text{LobImbalance}=\large \frac{V_{ask} - V_{bid}}{V_{ask} + V_{bid}}$，其中$V_{ask}$为卖1挂单量，$V_{bid}$为买1挂单量

微观价差$\text{Micro\_Mid\_Spread}=P_{micro} - P_{mid}=\frac{V_b P_a + V_a P_b}{V_a + V_b} -\frac{P_a + P_b}{2}$，实际是一个标准化的“重心偏移程度”

【什么是买1、卖1，即微观市场结构基础概念，见文末】



关于这个图最不可思议的就是它离散地分成了5段。下面是鞭策ai写的结果解读，领导们大致看一两条，理解这个图怎么看就行：

> 1. 左侧斜向上的一段（对应 LobImbalance 负值区、Micro_Mid_Spread 正值区）
>    表明，当 Micro_Mid_Spread 取值在 0.4 附近时，LobImbalance 的值越大（即从 -1.5 向 0 移动），其对应的 SHAP 交互值越高，意味着模型预测下一个3秒交易方向为“跌”（负标签）的概率越低。
> 2. 中间斜向上的一段（对应 LobImbalance 在零值附近、Micro_Mid_Spread 在零值附近）
>    表明，当 Micro_Mid_Spread 取值在 0 附近时，LobImbalance 的值越大（从负值穿过零向正值移动），其对应的 SHAP 交互值越高，意味着模型预测下一个3秒交易方向为“跌”的概率越低（或预测为“涨”的概率越高）。
> 3. 右侧斜向上的一段（对应 LobImbalance 正值区、Micro_Mid_Spread 负值区）
>    表明，当 Micro_Mid_Spread 取值在 -0.4 附近时，LobImbalance 的值越大（从 0 向 1.5 移动），其对应的 SHAP 交互值越高，意味着模型预测下一个3秒交易方向为“涨”（正标签）的概率越高。
> 4. 左侧斜向下的一段（位于“左侧斜向上段”上方，LobImbalance 负值区）
>    表明，在 LobImbalance 负值区（卖压区）的上方区域，当 Micro_Mid_Spread 为较高的正值时，LobImbalance 的值越大（向 0 移动），其对应的 SHAP 交互值越低，意味着模型预测下一个3秒交易方向为“跌”的概率越高。
> 5. 右侧斜向下的一段（位于“右侧斜向上段”上方，LobImbalance 正值区）
>    表明，在 LobImbalance 正值区（买压区）的上方区域，当 Micro_Mid_Spread 为较低的负值时，LobImbalance 的值越大，其对应的 SHAP 交互值越低，意味着模型预测下一个3秒交易方向为“涨”的概率越低（或预测为“跌”的概率越高）。

正常而言，即便模型学到了非线性的规律，图应该是连续、混杂的，但是现在非常离散地分成5组。我猜测这种分段来自最小报价单位，即**“买卖价差”并不是连续值，而是以0.01为最小单位的离散值。对于每个买卖价差（0.01、0.02、0.03、...）模型学出来的策略都不一样。**

此外还有一个点：**需要厘清LobImbalance和Micro_Mid_Spread在代数上的关系，它们其实来自同一些基础变量（卖1买1的价量）的组合。经过推导得到：$$\text{Micro\_Mid\_Spread} = -\frac{\text{Spread}}{2} \times \text{LobImbalance}$$**



因此，换一种方式画图来验证上面两件事：以LobImbalance为横轴、Micro\_Mid\_Spread为纵轴，SHAP值为颜色。

![99_Verification_Lob_vs_MicroSpread](./99_Verification_Lob_vs_MicroSpread.png)

这个图就更有意思了。首先，它验证了分段来自买卖价差离散，每一根直线对应一个买卖价差。也验证了两个特征之间的负线性关系。

然后仔细看这个图的形态：

> 这张图呈现出多条从原点放射状的离散直线，每条直线对应一个固定的价差。图中，横轴为订单簿不平衡度，纵轴为微观中间价差，点的颜色代表SHAP交互值（红色为正向预测贡献，蓝色为负向）。
>
> 1. 价差为1 tick（最平缓的直线）:
>
> - 横轴负值区（买压区）：从最左端到接近零点前，点为红色；紧邻零点左侧的一小段变为蓝色。
> - 横轴正值区（卖压区）：在零点右侧立即变为红色；随着向右移动，逐渐过渡为蓝色。
> - 整体趋势：在非零区域，横坐标绝对值越大，点的颜色越深（红或蓝的饱和度越高）。
>
> 2. 价差为2 ticks的直线:
>
> - 横轴负值区：从最左端到接近零点前，点为蓝色；紧邻零点左侧的一小段有微弱的红色。
> - 横轴正值区：从零点右侧开始为红色；随着向右移动，逐渐过渡为蓝色。
> - 整体趋势：同样，横坐标绝对值越大，颜色越深。**这与1 tick的表现完全相反。**
>
> 3. 价差≥3 ticks的直线（斜率依次增大）:
>
> - 横轴负值区：呈现出清晰的“蓝-红-蓝”三段式颜色分布。从最左端的蓝色开始，向零点移动时先变为红色，在紧邻零点前又变回蓝色。
> - 横轴正值区：呈现出对称的“红-蓝-红”三段式分布。从零点右侧的红色开始，向右移动时先变为蓝色，在接近最右端时又变回红色。
> - 动态变化：**随着价差增大，中间段的颜色区域（负值区的红色段、正值区的蓝色段）明显变宽，同时挤压了两侧的蓝色区域（负值区）或红色区域（正值区）。**价差越大，这种“中间区域扩张”的现象越显著。

这表明LightGBM学到了一个非常清晰的非线性规律：$$\text{预测方向} = f(\text{买卖压力}) \times g(\text{市场拥挤度/价差})$$

> 1. 流动性好（Spread=1）： 相信你的眼睛，买就是涨。
> 2. 流动性变差（Spread=2）： 别信你的眼睛，买就是跌（陷阱）。
> 3. 流动性枯竭（Spread $\ge$ 3）：
>    - 买一点点 $\to$ 没用（跌）
>    - 买得比较多 $\to$ 有用（涨）
>    - 买得太过分 $\to$ 假的（跌）

**本课题希望研究这个长得很漂亮的结论。希望研究清楚这个非线性关系的构成和来历，为之提供concrete的理论+实证解释。**



# 如何解释（跟ai商量出来的，简单扫一下解释的逻辑即可，之后会拆分成具体task）

## 基于微观动力学的解释（更扎实，有希望能做出来）

+ `Spread=1`： 最小价差下，盘口挂单量失衡最容易变现为真实的价格跳动，因此为动量效应。

+ `Spread=2`： 本质上是在回答“发生了什么导致价差从1扩大到2”——某方向后退了一步而另外一方没有跟上，也就是缺乏真实的跨价差进攻意愿。因此为反转效应。

+ `Spread>=3`：价差是挂单意图的可信度信号，价差越大（挂单成本越高），意图越可能是有效的（中间的动量区域扩张）。
  + 微弱失衡区（反转/无效）：当优势微弱时，不足以克服巨大的价差阻力去推动成交，模型将其视为无效噪音，维持均值回归（反转）判定。
  + 显著失衡区（动量/有效且扩张）：随着买盘优势增强，依然存在的挂单被视为真实意图。 同时，价差越大信号越昂贵（一旦被成交即面临巨大浮亏），因此这一区域随价差扩大而扩张。
  + 极端失衡区（反转/欺诈）：买单比卖单多很多却仍未成交，它便更可能是诱多或多头力竭，反之亦然。因此再次判定为反转。

### 需要排除的替代性解释

#### 统计

+ (1) Spread大时显示出的模式，其实可能只来自训练数据量小，不足以学出别的模式，于是退化为动量；两侧的反转（微弱失衡和极端失衡）也可能只是样本不足导致方差过大、或个别离群值主导了SHAP计算。
  + 排除：如果 Spread≥3 的模式仅仅是因为样本太少，那么把 Spread=1 的数据人为削减到同样的样本量，它也应该呈现出类似的退化模式；对 Spread≥3 的数据，剔除 SHAP 值最高和最低的 1% 样本后重画图。

#### 结构性偏误

+ 老生常谈的截面与时序异质性
  + (2) 截面：Spread=1 的数据可能主要来自高流动性的大盘蓝筹股，这类股票本身就由机构主导，动量效应强。Spread≥3 的数据可能主要来自低流动性的小微盘股，这类股票散户多、操纵多，本身就具有均值回归或非线性特征。——模型学到的不是“价差改变了博弈规则”，而是一个一般通过的“大盘股适合动量，小盘股适合反转”（Spread只是市值的代理变量）。
  + (3) 时序：宽价差（Spread≥3） 往往集中在开盘和尾盘时段，此时市场充满情绪化交易和隔夜信息消化。窄价差（Spread=1） 往往集中在盘中平稳期。
  + 排除：控制股票&时间。

+ (4) 中间“动量区域扩张”的原因，仅仅是因为在高波动率环境下，价格变动的最小步长变大了（在低波动率下，Imbalance=0.2 就能推动价格；在高波动率下，噪音太大，需要 Imbalance=0.6 才能确认是有效信号）。
  + 排除：检查是否可以通过简单地用波动率标准化 Imbalance 来消除这种模式差异。如果标准化后差异依旧存在（尤其是 Spread=2 的反转），则经济解释成立。
+ TO BE CONTINUED...

#### 内生性

+ (5) Bid-Ask Bounce（买卖价差跳动）：即使股票的真实价值（中间价）完全没有变，仅仅因为成交在买1和卖1之间来回跳动，也会制造出价格剧烈波动的假象。Spread=2 时的反转很可能只是这个机械过程的产物，而不是什么高深的博弈逻辑。
  + 排除：把预测目标换成 Mid-Price Return（中间价收益率） 而不是 Transaction Price Return（成交价收益率），看是否依然能观察到 Spread=2 时的反转。
+ (6) `LobImbalance` 可能与其他特征（如 `Accum_Vol_Diff` 资金流）的相关性随价差变化。在 Spread=1 时，挂单和成交高度相关，模型用 `LobImbalance` 指代了成交流（动量）。在 Spread=2 时，挂单和成交负相关（挂单是被动的），真正的预测力来自成交流，但模型为了拟合残差，强行给了 `LobImbalance` 一个负的 SHAP 值来修正。
  + 排除：计算不同 Spread 下 `LobImbalance` 与其他核心特征的相关系数矩阵。如果相关性结构没有剧烈变化，该解释可排除。
+ TO BE CONTINUED...



## 基于博弈论的解释

+ 还有一个需要做更扎实验证才能成立的博弈论解释——这一模式本质上反映了信息不对称下的筛选机制与分离均衡。**当前的流动性状态（价差）构成了一个机制设计中的筛选器，筛选“是否为知情交易者”的pooling和seperating均衡。**
  + 混同均衡（Pooling Equilibrium, Spread=1）：挂单成本低，知情者与噪音者均参与挂单，市场无法有效区分。此时市场依赖简单统计推断（“人多即势众”），表现为线性动量效应。
  + 分离均衡（Separating Equilibrium, Spread≥2）：挂单成本升高，逆向选择风险加剧。只有自信的知情者愿意承担风险挂单，噪音与欺诈者退出，挂单信号质量提升。
    + 近零区反转：轻微失衡主要由噪音引起，知情者参与不足，信号无效，价格趋向均值回归。
    + 中间动量： 价差越高，挂单成本越高，信号可信度越强。市场愿意相信更宽范围内的挂单是真实的，因此动量区间扩张。
      + Spread=2其实是个特殊情况，之所以能形成Spread=2，是因为某方后撤另一方没跟，说明它们完全是被动流动性，定价权在对方手里了。因此，对方会立刻回来吃单。<span style="color: grey;">例子：假设卖方是知情交易者，挂着10.01的卖单，买1为10.00。</span>
        + <span style="color: grey;">当公允价值降到9.98时，10.01成交概率太低，卖方会通过撤单挂个更低的卖单，来出手。当撤掉10.01后，Spread就变成0.02了。如果买方没跟进，卖方会立刻在10.00吃掉买单。</span>
        + <span style="color: grey;">当公允价值涨到10.02时，卖方挂10.02不赚钱还承担风险。卖方看买方在10.00不动，会觉得之后大概率还是得跌，因此（统计上）甚至愿意主动砸到10.00先出手。</span>
        + <span style="color: grey;">当公允价值涨到10.03时，卖方撤单并挂的新单就会使Spread>0.02，进入0.03的逻辑，即存在可信挂单，动量效应回归。</span>
    + 两端反转（Over-signaling）：过度失衡可能反映有人利用“高成本=高可信度”的共识进行反向操纵，属于欺诈信号，预示价格反转。

### 如何验证（By Gemini）

+ 针对“分离均衡”的检验（Spread=1 vs Spread $\ge$ 3）：证明 Spread $\ge$ 3 的红色区域确实是“知情交易”，而 Spread=1 是“噪音”。价格冲击分解——不仅仅看价格变了多少，要看“暂时冲击”和“永久冲击”的比例。
  + 提取 Spread=1 和 Spread $\ge$ 3 时，LobImbalance 相同（如 0.5）的样本。计算两个指标：
    - 已实现价差（Realized Spread, 5分钟后）： 衡量反转成分（做市商利润）。
    - 永久价格冲击（Permanent Impact, 5分钟后）： 衡量信息成分（知情交易）。
  + 预期结果：
    - Spread=1： 永久冲击接近 0，反转成分很高。（证明是噪音，价格怎么上去怎么回来）。
    - Spread $\ge$ 3 (红区)： 永久冲击很高，反转成分低。（证明价格是真的上去了，且没回来）。

+ 针对“Spread=2 陷阱”的检验：证明 Spread=2 的反转是因为“买方是被动挨打的 Low Type，卖方是主动砸盘的知情者”。
  + 方法（针对 Spread=2 且 买压极大 时）：
    - 检验 A（谁动的手）： 统计随后发生的成交中，由卖方发起的主动卖单（Aggressive Sell / Taker-Sell） 占比。
    - 检验 B（吃掉了吗）： 统计买一档位挂单的成交消耗率（Consumption Rate）
  + 预期结果：
    - 检验 A： 主动卖单占比应显著高于 50%（例如 70%+）。这直接证明了是卖方在砸买方，而不是买方在撤单或买方在向上吃。
    - 检验 B： 买一位置的挂单被快速成交的概率极高，而不是被撤单。

+ 针对“极端诱多/反向收割”的检验（Spread $\ge$ 3 两端）：证明极端失衡是“诱多/欺诈”，而不是“真的想买”。看挂单撤销率——知情者（想买）会成交，欺诈者（诱多）会撤单。

  + 方法：在 Spread $\ge$ 3 的环境下，对比 “中间红色区（动量）” 和 “极端蓝色区（反转）” 的订单行为。

    计算随后 3秒 内，盘口挂单量减少的原因：是被成交了（Executed） 还是 被撤销了（Cancelled）？

    预期结果：

    - 中间红色区： 挂单主要通过成交减少。（证明意图是真实的）。
    - 极端蓝色区： 挂单主要通过撤单消失，撤单率（Cancellation Rate）应显著高于红区。



# 在学术脉络中的位置

+ Gemini画的饼：**本文揭示了微观结构中的状态依赖性（State-dependency）：价差（Spread）不仅是交易成本，更是一个内生的信噪比调节器（Endogenous SNR Filter），它调节了订单流失衡（OBI）与未来收益之间的非线性映射关系。**

+ 订单簿失衡（Order Book Imbalance, OBI）的预测能力：学术界公认 $OBI$ 是短期价格最强的预测因子之一，但大多数研究只关注线性关系。买单多 $\rightarrow$ 供不应求 $\rightarrow$ 价格涨。
  + Cartea et al. (2015) 和 Cont et al. (2014) 是这方面的基石，他们建立了OBI与价格冲击（Price Impact）的线性模型。
  + **我们发现：这个线性关系只在 Spread=1 时成立（Pooling Equilibrium）。在 Spread $\ge$ 2 时，这个关系甚至会反转。这意味着传统模型在非流动性状态下是完全失效的。**

+ Gould & Bonart (2016)：率先探讨了 Tick Size 对预测力的影响，发现小 Tick（常态宽价差）股票的预测力较弱，且呈现出令作者困惑（puzzling）的非单调性。我们可以指出这种非单调性并非来自股票的静态属性，而是来自 Spread=2 时的动态结构性陷阱。我们解开了前人的谜题：这不是噪音，而是市场在特定流动性状态下的必然反转。
+ Xu, Gould & Howison (2019)：通过引入多层级订单流（Multi-level Order Flow），证明了增加深度信息可以提升线性模型的预测精度。我们证明了相比于堆砌线性的深度信息，捕捉 Spread 带来的非线性相变 更为关键。在宽价差状态下，简单的线性叠加模型会因忽略反转机制而完全失效。
+ Cartea, Jaimungal & Wang (2020)：建立理论模型指出宽价差增加了操纵成本，因此能抑制虚假挂单（Spoofing），理论上应提高订单流的信噪比。提供了这一理论的实证边界。我们发现即便在高成本的宽价差环境下，极端的挂单失衡（Over-signaling） 依然会被市场识别为不可信的诱导信号或存货力竭信号，从而导致预测方向的反转。
+ **Morariu-Patrichi & Pakkanen (2022)**：利用状态依赖的 Hawkes 过程，证明了在宽价差（Spread $\ge$ 2）状态下，市场的自我激发效应（动量）显著增强，内生性更高。我们指出**其对状态的划分（$\ge$ 2 视为同一类）过于粗糙，掩盖了其内部的分段异质机制。**我们发现宽价差下的动量受限于“信任区间”，一旦失衡度进入极端区域，所谓的“高内生性”会瞬间坍缩为显著的均值回归（反转）。



# 下一步需要做的事

+ 查文献综述。我已经弄出来一些初步的抓手

## 检验发现的这堆东西是否真成立

+ 准备更大规模的数据集：至少1年，包含所有基础指标（而不是只有这13个衍生指标）
  + 是否需要hs300之外的股票？
+ 使用更robust的特征工程重新训练
  + 把Micro_mid_spread换成普通spread（不换可能也行，这个暂吧）
  + 保留更多的基础指标

+ 在程序中验证对图像模式的描述，而不是只用眼睛看
  + 此外，Spread=1在接近原点处其实有一点点微不可见的反转，需要capture它并解释

+ 依次做“需要排除的替代性解释”1-6

## 建立更好的理论解释

+ 按照Gemini方案验证并修正博弈论解释
+ If possible，写一个简单的理论模型来佐证这个实证结果。可以参考Kyle (1985)和Foucault et al. (2005)的思路，但咱肯定写不了那么复杂

## 领导们需要学会啥

+ 微观市场结构基本概念（文末有）
+ 统计机器学习模型的基本原理，其实只需要LightGBM（梯度提升决策树）。大概知道咋回事就行
+ 如何鞭策ai写代码



# 附录：微观市场结构基本概念（Gemini）

要理解本课题中“预测价格涨跌”的逻辑，首先需要理解股票交易所的撮合机制——**限价订单簿（Limit Order Book, LOB）**。

#### 1. 什么是“买1”和“卖1”？

股票交易不像超市购物那样明码标价，而是一个**双向拍卖**的市场。

- **买方（Bid）**：想要买股票的人，把价格挂在系统里排队。价格出得越高，排得越靠前。排在第一位（出价最高）的，叫**买1 (Best Bid)**。
- **卖方（Ask）**：想要卖股票的人，也在排队。价格要得越低，排得越靠前。排在第一位（要价最低）的，叫**卖1 (Best Ask)**。

**图示：一个简单的盘口（Order Book）**

Plaintext

```
          价格 (Price)    挂单量 (Volume)
卖方区域  -----------------------------
  卖2      10.02           500手
  卖1      10.01           200手  <-- Ask Price (要价最低，最容易成交)
---------------------------------------
          (Spread = 0.01)         <-- 买卖中间的价差
---------------------------------------
  买1      10.00           1000手 <-- Bid Price (出价最高，最容易成交)
  买2       9.99           300手
买方区域  -----------------------------
```

#### 2. 什么是 Spread（买卖价差）？

即 **卖1价格 - 买1价格**。

- 在上图中，Spread = 10.01 - 10.00 = **0.01**。
- **最小变动单位 (Tick Size)**：A股大部分股票的最小价格变动是0.01元。因此，Spread一定是0.01的整数倍（如0.01, 0.02, 0.03...）。
- **本研究的核心发现**：就是发现当 Spread=0.01（流动性好）和 Spread=0.03（流动性差）时，市场的博弈规则完全不同。

#### 3. 什么是 LobImbalance（挂单不平衡）？

这是衡量**多空力量对比**的指标。

- 看图中的例子：买1有1000手想买，卖1只有200手想卖。
- **直觉**：买的人多，卖的人少，价格大概率要**涨**。
- **公式**：$\frac{卖量 - 买量}{卖量 + 买量}$。
  - 如果结果接近 -1，说明全是买单（买压大，涨）。
  - 如果结果接近 +1，说明全是卖单（卖压大，跌）。

#### 4. 什么是微观重心偏移 (Micro_Mid_Spread)？

虽然买1和卖1中间的几何中心是 $\frac{10.00+10.01}{2} = 10.005$。

但在微观上，因为买盘（1000手）远重于卖盘（200手），真实的成交重心其实已经向卖方偏移了。这个指标就是用来衡量**“资金重心偏离了几何中心多远”**。

#### 5. 总结：本课题在研究什么？

我们试图回答：**“当买单比卖单多的时候（Imbalance），价格一定会涨吗？”**

- **传统常识**：买单多 $\to$ 供不应求 $\to$ 涨。
- **本课题发现**：不一定！
  - 如果买卖靠得很近（Spread=0.01），买单多 $\to$ **涨**（这是真的买）。
  - 如果买卖离得稍远（Spread=0.02），买单多 $\to$ **跌**（这可能是陷阱）。
  - 如果买卖离得很远（Spread $\ge$ 0.03），情况更复杂，可能是欺诈信号。